pipeline {
    agent any

    environment {
        USERNAME = 'devopseasylearning2021'
        PASSWORD    = 'DevOps2021@'
 options { buildDiscarder(logRotator(artifactDaysToKeepStr: '',
     artifactNumToKeepStr: '', daysToKeepStr: '3', numToKeepStr: '5')),
      disableConcurrentBuilds() }

    stages {

        stage('build') {
            steps {
                sh '''
            docker build -t yvan:01 .
                
                '''
            }
        }
     
     
     stage('Docker tag') {
            steps {
                sh '''
                docker tag eric devopseasylearning2021/yvan:01
                
                '''
            }
        }


     stage('Docker login') {
            steps {
                sh '''
                docker login -u $USERNAME -P $PASSWORD
                
                '''
            }
        }
    stage('Docker push') {
            steps {
                sh '''
                docker docker devopseasylearning2021/yvan:01
                
                '''
            }
        }
    
    
    
    }



}
