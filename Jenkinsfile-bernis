pipeline {
    agent any
  options {
    buildDiscarder(logRotator(numToKeepStr: '30', artifactNumToKeepStr: '30'))
  }
  environment { 
  USERNAME = 'devopseasylearning2021'
  PASSWORD =  'DevOps2021@'
  }
    stages {
        stage('build image') {
            steps {
                sh '''
                docker build -t bernis2010:1 .
                ls 
                pwd
                touch douala
                '''
            }

        }
        stage('tag image') {
            steps {
                sh '''
                docker tag bernis2010:1 devopseasylearning2021/bernis2010:1
                ls 
                pwd
                touch douala
                '''
            }

        }
        stage('docker loging ') {
            steps {
                sh '''
                docker login -u $USERNAME -p $PASSWORD
                ls 
                pwd
                touch douala
                '''
            }

        }
         stage('docker PUSH ') {
            steps {
                sh '''
                docker push devopseasylearning2021/bernis2010:1
                pwd
                touch douala
                '''
            }

        }
        
        



    }
}
